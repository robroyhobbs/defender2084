<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Babylon.js Scene</title>
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
        #loadingText {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: Arial, sans-serif;
            font-size: 24px;
            color: white;
            background: rgba(0,0,0,0.7);
            padding: 20px;
            border-radius: 10px;
            display: none;
        }
    </style>
    <script>
        // Script loading error handler
        function handleScriptError(scriptSrc) {
            console.error('Failed to load script:', scriptSrc);
            document.getElementById('loadingText').textContent = 'Failed to load required script: ' + scriptSrc;
            document.getElementById('loadingText').style.display = 'block';
        }
    </script>
    <!-- Load dependencies with error handling -->
    <script src="https://cdn.babylonjs.com/earcut.min.js" onerror="handleScriptError('earcut.min.js')"></script>
    <script src="https://cdn.babylonjs.com/babylon.js" onerror="handleScriptError('babylon.js')"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js" onerror="handleScriptError('babylonjs.loaders.min.js')"></script>
    <script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js" onerror="handleScriptError('babylon.gui.min.js')"></script>
    <script src="game.js" onerror="handleScriptError('game.js')"></script>
</head>
<body style="background-color: black;">
    <canvas id="renderCanvas"></canvas>
    <div id="loadingText">Loading game...</div>
    <script>
        // Check if BABYLON is defined
        function checkBabylonLoaded() {
            if (typeof BABYLON === 'undefined') {
                console.error('BABYLON is not defined - scripts may not have loaded correctly');
                document.getElementById('loadingText').textContent = 'Error: Game engine not loaded';
                document.getElementById('loadingText').style.display = 'block';
                return false;
            }
            return true;
        }

        window.addEventListener('DOMContentLoaded', function() {
            console.log('DOM Content Loaded');
            document.getElementById('loadingText').style.display = 'block';
            
            // Add error handling
            window.onerror = function(msg, url, lineNo, columnNo, error) {
                const errorMessage = `Error: ${msg}\nURL: ${url}\nLine: ${lineNo}\nColumn: ${columnNo}`;
                console.error(errorMessage);
                console.error('Error object:', error);
                document.getElementById('loadingText').textContent = 'Error loading game. Check console for details.';
                return false;
            };

            // Wait a short moment to ensure scripts are loaded
            setTimeout(() => {
                try {
                    console.log('Checking BABYLON...');
                    if (!checkBabylonLoaded()) return;
                    
                    console.log('BABYLON loaded, initializing game...');
                    const game = new Game('renderCanvas');
                    console.log('Game instance created');
                    game.start();
                    console.log('Game started');
                    document.getElementById('loadingText').style.display = 'none';
                } catch (e) {
                    console.error('Failed to initialize game:', e);
                    document.getElementById('loadingText').textContent = 'Failed to initialize game: ' + e.message;
                }
            }, 500);
        });
    </script>
</body>
</html> 